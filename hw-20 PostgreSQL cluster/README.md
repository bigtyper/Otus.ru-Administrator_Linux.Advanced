<h3>В этом каталоге лежат файлы выполнения домашнего задания по занятию №20:
Postgres Cluster</h3>
<hr>
<h4>Краткое описание выполнения домашнего задания:</h4>
<ol><li>Для выполнения домашнего задания были изучены материалы лекции, а также материалы на эту тему в интернете</li>
<li>Рабочая среда для домашней работы была развернута средствами vargant/ansible - одна виртуальная машина в которой находилось 8 контейнеров lxc </li>
<li>Генерация контейнеров с установкой необходимого ПО и его обновление произведено средствами ansible</li>
<li>Файлы конфигурации были созданы и оттестированы вручную так как не было готового решения, в будущем необходимо прибегать к применению шаблонизаторов в ansible</li>
<li>В итоге мы получили patroni/postgres к которому идут обращения с haproxy который в свою очередь разгружает postgres cluster по операциям чтения/записи считывая текущее состояния кластера из etcd</li>
<li>Сам haproxy резервирован средствами keepalived</li>
<li>Все файл конфигурации а также скриншоты с небольшим описанием прилагаются</li>
</ol>

<h3></h3>
<hr>
<ul>
<h4>Краткое описание вложенных файлов:</h4>
<li><p>скриншоты/2023-03-01_23-50-52.png  - Визуальное описание ansible хоста</p></li>
<li><p>скриншоты/2023-03-01_23-54-49.png  - Визуальное описание служб в lxc контейнеров</p></li>
<li><p>скриншоты/2023-03-02_00-14-49.png  - исходное состояние postgresql кластера по статистика haproxy</p></li>
<li><p>скриншоты/2023-03-02_00-20-02.png  - демонстрация исходного состояния кластера из консоли</p></li>
<li><p>скриншоты/2023-03-02_00-28-39.png  - Ручное переключение Master - Leader</p></li>
<li><p>скриншоты/2023-03-02_00-31-38.png  - Штатный вывод из строя части нод общей инфраструктуры кластера<p></li>
<li><p>скриншоты/2023-03-02_00-37-11.png  - Визуальный контроль статистики при выводе из строя части нод<p></li>
<li><p>скриншоты/2023-03-02_00-43-08.png  - Тестирование работы кластера при выводе из сроя чсти нод: Создание БД<p></li>
<li><p>скриншоты/2023-03-02_00-49-07.png  - Тестирование работы кластера при выводе из сроя чсти нод: Визуальный контроль создания и репликации<p></li>
<li><p>скриншоты/2023-03-02_00-51-07.png  - Демонстрация отказа создания базы на ноде отвечающей только за чтение<p></li>
<li><p>скриншоты/2023-03-02_00-54-29.png  - Возврат в строй выключенных нод, проверка штатного состояния кластера<p></li>
<li><p>скриншоты/2023-03-02_00-57-03.png  - Штатное состояние достигнуто<p></li>
<li><p>В текущей папке также находятся конфиг файлы всех служб всех нод - Штатное состояние достигнуто<p></li>
</ul>
<hr>
<p><i><b>Примечание. </b></i>Для полного усвоения темы необходимо более глубокое изучение каждого из представленных комплнетов кластера</p>
<p>Также хотелось внедрить pg_bouncer но не получилось его состыковать на каждой ноде patrony, это нужно будет сделать в будущем</p>
<p></p>
